<link rel="stylesheet" href="/front/users/styles.css">

<div layout="row" style="padding-top: 30px; padding-bottom: 30px;">
    <div flex="15"></div>
    <div layout="row" style="min-width: 225px; max-width: 225px;">
        <div layout="column" flex>
            <div flex style="overflow: hidden; max-height: 300px; min-height: 225px;
             box-shadow: 0 3px 6px rgba(0, 0, 0, 0.54); background-color: #FAFAFA;">
                <img ng-if="user.avatar" alt="{{user.nick}}" ng-src='{{user.avatar}}'
                     style="width: 100%; height: 100%;">
                <img ng-if="!user.avatar"
                     src="/bower_components/material-design-icons/social/svg/design/ic_person_48px.svg"
                     style="width: 100%; height: 100%;">
            </div>
            <div style="padding-left: 2px;">
                <h3 style="margin-bottom: 0px; margin-top: 10px;">{{user.name}}</h3>
                <h4 style="margin: 0 0 5px 0; color: rgba(0,0,0,0.54);">{{user.nick}}</h4>
                <h4 style="margin-top: 5px; margin-bottom: 0px; color: rgba(0,0,0,0.54); font-weight: normal;">exp:
                    {{user.exp | thousand}}</h4>
            </div>

            <md-divider style="margin-top: 10px; margin-bottom: 10px;"></md-divider>

            <div layout="row" layout-align="space-around center">
                <h4 style="margin-bottom: 0px; margin-top: 0px; color: #3F51B5;">{{user.skills.length || 0}}</h4>
                <h4 style="margin-bottom: 0px; margin-top: 0px; color: #E91E63;">{{user.needs.length || 0}}</h4>
            </div>
            <div layout="row" layout-align="space-around center">
                <h5 style="margin-bottom: 0px; margin-top: 0px; color: rgba(0,0,0,0.54);">Умею</h5>
                <h5 style="margin-bottom: 0px; margin-top: 0px; color: rgba(0,0,0,0.54);">Хочу</h5>
            </div>


            <div ng-if="user.skills">
                <md-divider style="margin-top: 10px; margin-bottom: 10px;"></md-divider>
                <div layout="column" layout-align="center center">
                    <h4 style="margin: 0px; margin-bottom: 5px;">Умею</h4>
                </div>
                <div>
                    <md-button class="md-raised md-primary skill-button" aria-label="skillBtn" style="max-width: 225px;"
                               ng-repeat="skill in user.skills">
                        {{findSkill(skill).title}}
                    </md-button>
                </div>
            </div>

            <div ng-if="user.needs">
                <md-divider style="margin-top: 10px; margin-bottom: 10px;"></md-divider>
                <div layout="column" layout-align="center center">
                    <h4 style="margin: 0px; margin-bottom: 5px;">Хочу</h4>
                </div>
                <div>
                    <md-button class="md-raised md-accent skill-button" aria-label="skillBtn" style="max-width: 225px;"
                               ng-repeat="need in user.needs">{{findSkill(need).title}}
                    </md-button>
                </div>
            </div>

        </div>
    </div>
    <div layout="row" flex>
        <div layout="column" flex style="padding-left: 20px;">
            <div layout="row" style="margin-bottom: 10px;">
                <ul class="profile-categories">
                    <li><a href ng-click="categoryNum = 0"
                           ng-class="{'category-selected': categoryNum == 0}">Прогресс</a></li>
                    <li class="category-divider">|</li>
                    <li><a href ng-click="categoryNum = 1"
                           ng-class="{'category-selected': categoryNum == 1}">Информация</a></li>
                </ul>
            </div>
            <div ng-switch="categoryNum">
                <div ng-switch-when="0" style="box-shadow: 0 1px 2px rgba(0,0,0,0.26);">
                    <md-tabs md-selected="tabSelected">
                        <md-tab>Решено: <span style="font-weight: bold;">{{user.tasks_done.length || 0}}</span></md-tab>
                        <md-tab>Проверено: <span style="font-weight: bold;">{{user.tasks_checked.length || 0}}</span>
                        </md-tab>
                        <md-tab>Подтверждено: <span
                                style="font-weight: bold;">{{user.tasks_approved.length || 0}}</span></md-tab>
                        <md-tab>Создано: <span style="font-weight: bold;">{{user.tasks_created.length || 0}}</span>
                        </md-tab>
                    </md-tabs>
                    <md-content style="max-height: calc(100vh - 172px);">
                        <md-list>
                            <ng-switch on="tabSelected">
                                <div ng-switch-when="0">
                                    <tasks-solve-list tasks-obj="tasks_done" users-obj="users"
                                                      skills-obj="skills"></tasks-solve-list>
                                    <div ng-if="!user.tasks_done" class="md-tile-content"
                                         layout="column" layout-align="center center" flex>
                                        <h3 class="list-empty">Пользователь не решил ни одного задания</h3>
                                    </div>
                                </div>
                                <div ng-switch-when="1">
                                    <tasks-solve-list tasks-obj="tasks_checked" users-obj="users"
                                                      skills-obj="skills"></tasks-solve-list>
                                    <div ng-if="!user.tasks_checked" class="md-tile-content"
                                         layout="column" layout-align="center center" flex>
                                        <h3 class="list-empty">Пользователь не проверил ни одного решения</h3>
                                    </div>
                                </div>
                                <div ng-switch-when="2">
                                    <tasks-solve-list tasks-obj="tasks_approved" users-obj="users"
                                                      skills-obj="skills"></tasks-solve-list>
                                    <div ng-if="!user.tasks_approved" class="md-tile-content"
                                         layout="column" layout-align="center center" flex>
                                        <h3 class="list-empty">Пользователь не подтвердил ни одного задания</h3>
                                    </div>
                                </div>
                                <div ng-switch-when="3">
                                    <tasks-solve-list tasks-obj="tasks_created" users-obj="users"
                                                      skills-obj="skills"></tasks-solve-list>
                                    <div ng-if="!user.tasks_created" class="md-tile-content"
                                         layout="column" layout-align="center center" flex>
                                        <h3 class="list-empty">Пользователь не создал ни одного задания</h3>
                                    </div>
                                </div>
                            </ng-switch>
                        </md-list>
                    </md-content>
                </div>
                <md-card ng-switch-when="1" style="margin: 0;">
                    <md-card-content style="padding-top: 0; padding-bottom: 0;">
                        <md-list class="info-list">
                            <md-list-item layout="row" layout-align="start start" ng-mouseenter="r1 = true"
                                          ng-mouseleave="r1 = false">
                                <div flex="30" class="info-header">День рождения:</div>
                                <div ng-if="user.birthday">{{user.birthday | date: 'dd MMMM yyyy'}} г.</div>
                                <div class="info-empty" ng-if="!user.birthday">не указано</div>
                                <md-button class="md-secondary md-icon-button" style="border-radius: 50%;" ng-if="r1">
                                    <md-icon
                                            md-svg-icon="/bower_components/material-design-icons/content/svg/design/ic_create_24px.svg"
                                            aria-label="LaLat" style="outline: none;"
                                    </md-icon>
                                </md-button>
                            </md-list-item>

                            <md-divider></md-divider>

                            <md-list-item layout="row" layout-align="start start" ng-mouseenter="r2 = true"
                                          ng-mouseleave="r2 = false">
                                <div flex="30" class="info-header">Место проживания:</div>
                                <div ng-if="user.city || user.country">{{user.city}}<span
                                        ng-if="user.city && user.country">, </span>{{user.country}}
                                </div>
                                <div class="info-empty" ng-if="!(user.city || user.country)">не указано</div>
                                <md-button class="md-secondary md-icon-button" style="border-radius: 50%;" ng-if="r2">
                                    <md-icon
                                            md-svg-icon="/bower_components/material-design-icons/content/svg/design/ic_create_24px.svg"
                                            aria-label="LaLat" style="outline: none;"
                                    </md-icon>
                                </md-button>
                            </md-list-item>

                            <md-divider></md-divider>

                            <md-list-item layout="row" layout-align="start start" ng-mouseenter="r3 = true"
                                          ng-mouseleave="r3 = false">
                                <div flex="30" class="info-header">Образование:</div>
                                <div layout="column">
                                    <div ng-repeat="ed in user.education" ng-class="{'not-last': !$last}">
                                        <div><span ng-if="user.education.length > 1" class="info-header">•</span>
                                            {{ed.school.name}}
                                            <span class="info-header" ng-if="ed.year">({{ed.year.name}})</span>
                                            <span ng-if="ed.concentration"> — {{ed.concentration[0].name}}</span>
                                        </div>
                                    </div>
                                    <div class="info-empty" ng-if="!user.education">не указано</div>
                                </div>
                                <md-button class="md-secondary md-icon-button" style="border-radius: 50%;" ng-if="r3">
                                    <md-icon
                                            md-svg-icon="/bower_components/material-design-icons/content/svg/design/ic_create_24px.svg"
                                            aria-label="LaLat" style="outline: none;"
                                    </md-icon>
                                </md-button>
                            </md-list-item>

                            <md-divider></md-divider>

                            <md-list-item layout="row" layout-align="start start" ng-mouseenter="r4 = true"
                                          ng-mouseleave="r4 = false">
                                <div flex="30" class="info-header">Работа:</div>
                                <div layout="column">
                                    <div ng-repeat="wo in user.work" ng-class="{'not-last': !$last}">
                                        <div><span ng-if="user.work.length > 1" class="info-header">•</span>
                                            {{wo.employer.name}}<span class="info-header"
                                                                      ng-if="wo.start_date || wo.end_date">(<span
                                                    ng-if="wo.start_date">с {{wo.start_date | date: 'MMMM yyyy'}}</span><span
                                                    ng-if="wo.end_date">по {{wo.end_date | date: 'MMMM yyyy'}}</span>)</span><span
                                                    ng-if="wo.position">, {{wo.position.name}}</span>
                                        </div>
                                    </div>
                                    <div class="info-empty" ng-if="!user.work">не указано</div>
                                </div>
                                <md-button class="md-secondary md-icon-button" style="border-radius: 50%;" ng-if="r4">
                                    <md-icon
                                            md-svg-icon="/bower_components/material-design-icons/content/svg/design/ic_create_24px.svg"
                                            aria-label="LaLat" style="outline: none;"
                                    </md-icon>
                                </md-button>
                            </md-list-item>
                        </md-list>
                    </md-card-content>
                </md-card>
            </div>
        </div>
    </div>
    <div flex="15"></div>
</div>